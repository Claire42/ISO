###Системные требования:

Apache c mod\_rewrite и следующие переопределения для директория: `Options Indexes FileInfo`.<br />
Посмотрите `.htaccess` файл для большей информации.<br />
`PHP >=4.3` с поддержкой базы данных (`SQLite`, `PostgreSQL`, `MySQL` через `PEAR::DB` - прочие СУБД могут тоже работать)<br />
`PEAR::DB`<br />
`PEAR::HTML_Template_IT`<br />
`ImageMagick`

На клиентской стороне, относительно новый браузер (Gecko-based, Safari или IE6) с поддержкой Javascript и cookie.

Посетите [requirements help page](http://ochiba.x-maru.org/reqs) для дополнительной информации о получении PEAR::DB или PEAR::HTML_Template_IT для вашей системы.

Для установки pear и требуемых пакетов в Debian выполните следующее:

	aptitude install php-pear
	pear install DB
	pear install HTML_Template_IT

**Внимание:** Пакет DB устарел и в скором времени может быть удалён.<br />
В следствии чего использование Ochiba на новых версиях PHP может быть невозможно.<br />
Тем не менее на PHP 5.4.4-14 пока всё работает.

Следующие требования считаются опциональными, но без них вы не сможете использовать некоторый функционал или иметь некоторые неудобства.<br />
wget или curl (для получения изображений с удаленного сервера)<br />
file и unzip (для обработки zip файлов). Без этого будет не возможно загружать изображения из архива.
***

###Быстрый старт:

* Распакуйте архив куда-либо. Вы можете переименовать директорий.
* Сделайте директории `img/` и `thumbs/` записываемыми. Вам необходимо создать директорий для кэша. `/tmp/ochiba-cache` (по умолчанию) он тоже должен быть записываемым.
* Отредактируйте `conf.php`: 
	* Укажите `DSN` для `PEAR::DB`.
	* Смените значение `TRIPCODE_SECRET` параметра из "changeme" на что нибудь другое.
	* Смените значение `FEATURE_RESTRICT_POSTING` параметра на "ADMINS", если вы собираетесь использовать очибу в режиме "фотоальбом" (только определённые пользователи могут оставлять посты).
* Перейдите по адресу `http://your.site/path/to/ochiba/install.php`. Будет создана база данных и произведены некоторые проверки. Надеемся, что всё пройдёт хорошо. 
* Перейдите по адресу `http://your.site/path/to/ochiba/admin`. Вы увидите сообщения об ошибке, которое нужно проигнорировать. 
* Введите `TRIPCODE_SECRET`, который вы указали в конфиге. При отправке запроса скрипт сгенерирует трипкод для этого слова. Замените значение параметра ADMINS на этот трипкод в файле conf.php
* Перейдите назад `http://your.site/path/to/ochiba/admin`. Создайте категорию.

Установка завершена.

За более подробной информацией обратитесь к документации: [http://ochiba.x-maru.org/docs](http://ochiba.x-maru.org/docs)

Разработка скрипта ведётся с 2004 года. Последний релиз выпущен в 2009 году.
***

###Homepage
Главная разбита на две колонки.<br />
Слева располагается навигация.<br />
Справа произвольный текст, который можно отредактировать в файле templates/home.tmpl<br />
Элементы навигации доступны на каждой странице.

Навигация:

* Home
* Список категорий
* All (Список всех тредов)
* Collapse
* Expand
* Поиск
* Статистика
* Ссылка на форму постинга
* Настройки
* Слайдшоу

Список категорий (досок) никак не отделяется от остальных элементов навигации.<br />
Назначение элементов Collpase и Expand разгадать не удалось.
***

###Поиск
Представляет собой всплывающее окно с формой поиска.<br />
Вводим запрос. Указываем где искать и получаем список результатов на новой странице.

Параметры поиска:

* Заголовок
* Ключевые слова
* Комментарий
* Имя файла
* Имя постера
* Трипкод

Имеется возможность так же выбрать список категорий, в которых нужно найти.<br />
Можно искать сразу по нескольким параметрам и категориям.
***

###Статистика
Топ ключевых слов и изображений.<br />
Помимо постов с изображениями также выводятся посты и без изображений. Видимо баг.
***

###Постинг
Представляет собой всплывающее окно с формой для отправки поста.

Поля формы:

* Имя
* Трипкод
* Файл: (2MB max)
* Заголовок
* Ключевые слова
* Категории
* Капча
* Комментарий

Поля "имя", "капча" и "категории" обязательны для заполнения.<br />
С помощью трипкода можно потом удалить пост.<br />
Для администратора обязательно вводить капчу.

Отсутствует разметка. При отправке поста пользователь остаётся на той же странице, что и был до отправки.<br />
Имеются проблемы с кодировкой при использовании кириллицы в имени. <span class="spoiler">Для этого нужно поколдовать с настройками.</span><br />
Ссылки на ответы обрабатываются только если отредактировать исходный код.<br />
Ознакомьтесь с документацией для получения подробной информации: [http://ochiba.x-maru.org/docs#custom](http://ochiba.x-maru.org/docs#custom)<br />
Карта ответов остутствует.<br />
При ошибке показывается всплывающее окно с текстом и фокус переводится на поле, в котором допущена ошибка.<br />
Форма ответа плавающая.<br />
Создать новый тред можно из любого места, будь ты в треде, доске или на главной.<br />
Для ответа в тред приходится скроллить в самое начало треда, для того, чтобы открыть форму ответа.

Для администратора есть возможность забанить постера по IP. При клике по соответствующей ссылке возле поста открывается всплывающее окно с формой.<br />
Нужно указать IP адрес и причину бана.<br />
Также можно забанить по маске. Например, вхождение "192.168.0.%" будет соответствовать любому адресу в этой подсети.

Перемещение.<br />
Выбрать номер пункта после которого должен появится перемещаемый пункт.<br />
На практике несовсем понятно как это работает и для чего оно вообще нужно.

Есть возможность отредактировать свой пост. Странно, что в отличии от удаления поста здесь вводить трипкод ненужно.<br />
При редактировании ОП-поста форма немного отличается. Можно сменить заголовок, категории, кейворды, трипкод и т.д.

Изображения:<br />
Имеется счётчик просмотров. Изображения открываются в новом окне.

При просмотре доски или треда можно свернуть все посты треда.
***

###Настройки

* Имя
* Трипкод
* Временная зона
* Тип всплывающих меню: Окно, Iframe
* Стиль: ochiba, classic, futallaby

***

###Слайдшоу.
Отображает изображения текущей страницы в режиме слайдшоу.<br />
На главной ссылка на слайдшоу отображается, но само слайдшоу не работает, т.к. изображения для показа отсутствуют.<br />
Возможно задать интервал в секундах, вернуться назад и поставить на паузу.

***

###Специальные URL:

- `/rss`

>Если параметр FEATURE\_RSS в конфиге включен, /rss вернет RSS документ для всех категорий.<br />
Вы можете добавить имя категории к URI /rss/category.rss<br />
/rss/all.rss не работает, используйте только /rss.<br />
Если у вас включен RSS, то соответствующие ссылки будут отображены в нижней части страницы категорий.

- `/admin`

>Административные опции доступны здесь: управление категориями и очистка кэша.<br />
Для доступа к этой странице, вы должны иметь пароль к трипкоду в COOKIE.<br />
Трипкод должен соответствовать трипкоду, указанному в конфиге.

Параметры категорий:
Аббревиатура, Имя, Описание, Сортировка: Бамп, по возрастанию, по убыванию.

Имеется возможность только отредактировать существующие категории. Удалить нет возможности.

- `/mod`

>Модераторские опции доступны здесь: управление банами.<br /> 
Для доступа к этой странице, вы должны иметь в COOKIES пароль от трипкода,<br />
совпадающего с параметром конфигурации MODERATORS

Список забанненых. Форма для удаления треда. Чтобы удалить тред, нужно знать только его ID.

Бан пермаментный по IP. Нет возможности попасть ни на какую-либо другую страницу.<br />
По любому запросу отдаётся сообщение ошибке:

>Banned<br />
You've been banned. Please contact the administrator for details.

- `/keyword`

>Это самый интересный URL. Он позволяет вам делать виртуальные альбомы на лету, используя условия, найденные в ключевых словах.<br />
Например, URL /keyword/foobar сгенерирует виртуальный набор изображений из тредов содержащих ключевое слово "foobar".<br />
Очевидно, использование этой фичи требует некоторой осторожности при расстановке кейвордов для изображений.

>keyword/foo.
Начиная с версии 0.9.2, 2-1 параметр для /keyword может быть добавлен для фильтрации на основе категории.<br />
Например, /keyword/foo/bar вернет совпадения по ключу "foo" только в категории "bar"

### Заключение

Движок довольно устаревший и очень давно не обновлялся.<br />
На первый взгляд он показался мне очень даже стабильным, но немного не доработанным.<br />
Добавить нормальные аккаунты <span class="spoiler">на трипкоды я бы не стал полагаться</span>, обновится до PHP 5.5, добавить возможность принудительной анонимности и допилить напильником.<br />
Только после всего этого, <span style="text-decoration: underline">возможно</span> его можно будет использовать для какой-нибудь мелкоборды.<br />
Хотя, впринципе ничто не мешает использовать его в том виде, в каком он сейчас.<br />
Но всё же стоит быть на чеку при обновлении версии PHP, чтобы не оказалось, что при обновлении ваша <span style="text-decoration: line-through">параша</span> борда перестанет работать.